# SSL Certificate Manager Configuration for Apache on Alpine

<Directory /var/www/localhost/htdocs/ssl-manager>
    Options -Indexes +FollowSymLinks
    AllowOverride All
    Require all granted
    
    # Security headers
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
    Header set Referrer-Policy "strict-origin-when-cross-origin"
</Directory>

# Interdire l'accès au répertoire data
<Directory /var/www/localhost/htdocs/ssl-manager/data>
    Require all denied
</Directory>

# Autoriser le téléchargement des certificats uniquement
<Directory /var/www/localhost/htdocs/ssl-manager/data/certificates>
    Options -Indexes
    Require all granted
    
    <FilesMatch "\.(crt|pem|key|p12|pfx)$">
        Header set Content-Disposition "attachment"
    </FilesMatch>
</Directory>

# PHP settings
<IfModule php82_module>
    php_value upload_max_filesize 10M
    php_value post_max_size 10M
    php_value max_execution_time 300
    php_value memory_limit 256M
</IfModule>

# Enable mod_headers if not already enabled
LoadModule headers_module modules/mod_headers.so
